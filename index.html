<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pixel Palace Community Cup - Elite Registration</title>
    
    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/alphabravo2k-rgb/pixel-palace-registration/1a7d90c43796fd037316bdaf4f3b4de9a485d615/image_4379f9.png">

    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module">
        import { createIcons } from 'https://cdn.jsdelivr.net/npm/lucide@latest/dist/esm/lucide.js';
        window.onload = createIcons;
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Teko:wght@300..700&family=Rajdhani:wght@500;700&display=swap');
        
        body { 
            font-family: 'Rajdhani', sans-serif; 
            background-color: #050505; 
            color: #e4e4e7;
            overflow-x: hidden;
        }
        h1, h2, h3, .brand-font { 
            font-family: 'Teko', sans-serif; 
            font-weight: 700;
        }
        
        /* --- BACKGROUND --- */
        .bg-cyber {
            background-image: 
                linear-gradient(rgba(18, 18, 18, 0.85), rgba(0, 0, 0, 0.98)),
                repeating-linear-gradient(0deg, transparent, transparent 2px, #1a1a1a 2px, #1a1a1a 4px),
                url('https://www.transparenttextures.com/patterns/cubes.png');
            background-size: cover;
            background-attachment: fixed; 
        }

        /* --- GLASS PANELS --- */
        .hud-panel {
            background: rgba(20, 20, 25, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
            transition: all 0.3s ease;
        }
        @media (min-width: 768px) {
            .hud-panel { clip-path: polygon(0 0, 100% 0, 100% 95%, 95% 100%, 0 100%); }
        }

        .hud-panel::before {
            content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 100%;
            background: linear-gradient(to bottom, #c026d3, #7c3aed); opacity: 0.8;
        }
        .hud-panel:hover {
            border-color: rgba(192, 38, 211, 0.4);
            box-shadow: 0 0 30px rgba(124, 58, 237, 0.15);
        }

        /* --- INPUTS --- */
        .input-tech {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #333;
            font-family: 'Rajdhani', sans-serif;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        .input-tech:focus {
            border-color: #d946ef;
            background: rgba(20, 0, 20, 0.6);
            outline: none;
            box-shadow: 0 0 15px rgba(217, 70, 239, 0.2);
        }

        /* --- BUTTONS --- */
        .btn-skew {
            transform: skew(-10deg);
            background: linear-gradient(90deg, #9333ea, #db2777);
            transition: all 0.3s ease;
        }
        .btn-skew > span { transform: skew(10deg); display: block; }
        .btn-skew:hover { filter: brightness(1.2); box-shadow: 0 0 20px rgba(219, 39, 119, 0.6); }
        .btn-skew:disabled { background: #333; cursor: not-allowed; filter: grayscale(1); }

        /* --- MAP CARDS --- */
        .map-card {
            border: 1px solid #333; transition: all 0.3s ease; position: relative; overflow: hidden;
            background-size: cover; background-position: center; height: 100px; 
            display: flex; align-items: center; justify-content: center; border-radius: 4px;
        }
        .map-card::before {
            content: ''; position: absolute; inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0.2)); 
            transition: all 0.3s ease; z-index: 1;
        }
        .map-card:hover::before { background: linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0)); }
        .map-card-content { position: relative; z-index: 2; text-align: center; width: 100%; }
        .map-card:hover { transform: translateY(-3px) scale(1.02); border-color: #d946ef; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }
        .glow-active:hover { box-shadow: 0 4px 20px rgba(34, 197, 94, 0.4); border-color: #22c55e; }

        /* --- ANIMATIONS --- */
        @keyframes breathe {
            0% { transform: scale(1); filter: drop-shadow(0 0 15px rgba(168, 85, 247, 0.5)); }
            50% { transform: scale(1.03); filter: drop-shadow(0 0 25px rgba(236, 72, 153, 0.7)); }
            100% { transform: scale(1); filter: drop-shadow(0 0 15px rgba(168, 85, 247, 0.5)); }
        }
        .logo-super-glow {
            animation: breathe 4s ease-in-out infinite; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); cursor: pointer;
        }
        .logo-super-glow:hover { animation: none; transform: scale(1.15) rotate(1deg); filter: drop-shadow(0 0 40px rgba(219, 39, 119, 0.9)); }
        .logo-super-glow:active { transform: scale(0.95); filter: drop-shadow(0 0 10px rgba(219, 39, 119, 1)); }

        /* --- TOGGLE SWITCH --- */
        .toggle-checkbox:checked { right: 0; border-color: #22c55e; }
        .toggle-checkbox:checked + .toggle-label { background-color: #22c55e; }
    </style>
</head>
<body class="min-h-screen bg-cyber selection:bg-fuchsia-500/40">

    <script>
        const FORM_ID = '1FAIpQLSdQbTqPJNaXGCLKuZIIRGKB-l_HkYxyiw9wJNle1yfPSpdVUA'; 
        const SLOT_API_URL = 'https://script.google.com/macros/s/AKfycbzSmGcU--OGu_QW1ffPZdcZeoBK2vJT6aNEE5RdRPjDqx4gYbjiu3xgCtJIkT7Esk_kuA/exec';

        const ENTRY_IDS = {
            teamName: '1121574294', teamRegion: '338680042', logoLink: '948368869', inviteCode: '408078650',
            p1Discord: '1839452526', p1Steam: '1500448149', p1Faceit: '1958103083', p1Rank: '782122930',
            p2Discord: '1270023061', p2Steam: '1439517128', p2Faceit: '99449309', p2Rank: '1938535587',
            p3Discord: '1897703312', p3Steam: '1222592573', p3Faceit: '1707574949', p3Rank: '1157807462',
            p4Discord: '147305209', p4Steam: '1816980328', p4Faceit: '1788520001', p4Rank: '1055230278',
            p5Discord: '1060565307', p5Steam: '10072927', p5Faceit: '663397778', p5Rank: '878475649',
            p6Discord: '1870684113', p6Steam: '1906603232', p6Faceit: '1398830401', p6Rank: '1874372316',
            checkboxes: '2065705002' 
        };
    </script>

    <div class="relative z-10 w-full max-w-7xl mx-auto px-4 sm:px-6 py-8 md:py-16">
        
        <header class="text-center mb-12 md:mb-16 flex flex-col items-center relative">
            <div class="hidden sm:block absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-fuchsia-600/10 blur-[100px] rounded-full -z-10 pointer-events-none"></div>

            <a href="https://discord.gg/JdXheQbvec" target="_blank" class="transition-transform">
                <img src="https://raw.githubusercontent.com/alphabravo2k-rgb/pixel-palace-registration/1a7d90c43796fd037316bdaf4f3b4de9a485d615/image_4379f9.png" 
                     alt="Pixel Palace Logo" 
                     class="w-40 h-40 md:w-64 md:h-64 object-contain logo-super-glow mb-4">
            </a>

            <h1 class="text-5xl sm:text-7xl md:text-9xl font-black text-white italic tracking-tighter brand-font leading-none drop-shadow-[0_0_15px_rgba(192,38,211,0.5)] py-2 relative z-10">
                COMMUNITY <span class="text-transparent bg-clip-text bg-gradient-to-r from-fuchsia-400 via-pink-500 to-purple-600 inline-block pr-2">CUP</span>
            </h1>
            
            <div class="flex items-center gap-2 md:gap-4 mt-2 mb-8">
                <div class="h-[1px] w-8 md:w-12 bg-zinc-600"></div>
                <p class="text-lg md:text-3xl text-zinc-300 brand-font tracking-[0.2em] md:tracking-[0.3em] uppercase">January 09 • 2026</p>
                <div class="h-[1px] w-8 md:w-12 bg-zinc-600"></div>
            </div>

            <div class="w-full max-w-5xl mx-auto p-[1px] bg-gradient-to-r from-transparent via-zinc-700 to-transparent">
                <div class="grid grid-cols-2 md:grid-cols-4 bg-black/80 backdrop-blur-md">
                    <div class="group relative p-3 md:p-4 border-r border-b md:border-b-0 border-zinc-800 text-center cursor-help">
                        <p class="text-[9px] md:text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold">Prize Pool</p>
                        <p class="text-2xl md:text-3xl text-yellow-400 brand-font drop-shadow-md underline decoration-dotted decoration-yellow-400/30 underline-offset-4">$4,000 USD</p>
                        <div class="hidden md:block absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-48 bg-zinc-900 border border-yellow-500/30 p-3 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none shadow-xl z-50">
                            <div class="text-xs space-y-2">
                                <div class="flex justify-between border-b border-zinc-800 pb-1"><span class="text-yellow-400 font-bold">1st</span> <span class="text-white">$2,500</span></div>
                                <div class="flex justify-between border-b border-zinc-800 pb-1"><span class="text-zinc-400 font-bold">2nd</span> <span class="text-white">$1,000</span></div>
                                <div class="flex justify-between"><span class="text-orange-500 font-bold">3rd</span> <span class="text-white">$500</span></div>
                            </div>
                        </div>
                    </div>
                    <div class="p-3 md:p-4 border-r-0 md:border-r border-b md:border-b-0 border-zinc-800 text-center">
                        <p class="text-[9px] md:text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold">Live Slots</p>
                        <p id="slot-display" class="text-2xl md:text-3xl text-fuchsia-400 brand-font flex justify-center items-center gap-2 drop-shadow-md">
                            <i data-lucide="loader-2" class="animate-spin w-5 h-5"></i>
                        </p>
                    </div>
                    <div class="p-3 md:p-4 border-r border-zinc-800 text-center">
                        <p class="text-[9px] md:text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold">Format</p>
                        <p class="text-2xl md:text-3xl text-cyan-400 brand-font drop-shadow-md">5v5 BO5</p>
                    </div>
                    <div class="p-3 md:p-4 text-center flex flex-col justify-center">
                        <p class="text-[9px] md:text-[10px] text-zinc-500 uppercase tracking-widest mb-1 font-bold">Requirement</p>
                        <p class="text-xs md:text-sm font-bold text-green-400 uppercase leading-none tracking-wide">Discord Member</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 flex flex-col sm:flex-row justify-center gap-4 w-full sm:w-auto">
                <a href="https://discord.gg/JdXheQbvec" target="_blank" class="btn-skew px-8 py-3 text-white font-bold text-lg uppercase tracking-wider flex items-center justify-center gap-2">
                    <span class="flex items-center gap-2"><i data-lucide="message-circle" class="w-5 h-5"></i> Join Discord</span>
                </a>
                <a href="https://www.twitch.tv/pXpLgg" target="_blank" class="px-8 py-3 border border-purple-500/50 text-purple-300 hover:bg-purple-500/10 font-bold text-lg uppercase tracking-wider flex items-center justify-center gap-2 transition-all">
                    <i data-lucide="tv" class="w-5 h-5"></i> Twitch Stream
                </a>
            </div>
        </header>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8">
            
            <div class="lg:col-span-1 space-y-6">
                
                <div class="hud-panel p-5 md:p-6 !border-l-4 !border-l-fuchsia-500">
                    <p class="text-center text-xs uppercase tracking-widest text-fuchsia-400 mb-1">Time Remaining</p>
                    <div id="countdown-wrapper" class="bg-black/40 rounded p-3 text-center border border-fuchsia-500/20">
                        <p id="time-left" class="text-3xl md:text-4xl brand-font text-white drop-shadow-[0_0_10px_rgba(232,121,249,0.5)]">LOADING...</p>
                    </div>
                </div>

                <div class="hud-panel p-5 md:p-6">
                    <h3 class="text-xl md:text-2xl text-cyan-400 brand-font mb-4 flex items-center gap-2 border-b border-white/10 pb-2">
                        <i data-lucide="calendar-clock" class="w-5 md:w-6 h-5 md:h-6"></i> TOURNAMENT INTEL
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <p class="text-[10px] uppercase text-zinc-500 font-bold tracking-widest">Operation Start</p>
                            <p class="text-lg md:text-xl font-bold text-white">January 09, 2026</p>
                            <p class="text-xs text-zinc-400 mt-1">Brackets released on Discord.</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase text-zinc-500 font-bold tracking-widest">Registration Cutoff</p>
                            <p class="text-lg md:text-xl font-bold text-white">Dec 31, 2025 <span class="text-sm font-normal text-zinc-500">(23:59 CET)</span></p>
                        </div>
                    </div>
                </div>

                <div class="hud-panel p-5 md:p-6">
                    <h3 class="text-lg md:text-xl text-red-400 brand-font mb-3 flex items-center gap-2">
                        <i data-lucide="shield-check" class="w-5 h-5"></i> MANDATORY PROTOCOLS
                    </h3>
                    <ul class="text-sm space-y-3 text-zinc-300">
                        <li class="flex gap-2">
                            <i data-lucide="check" class="w-4 h-4 text-green-500 mt-0.5 min-w-[16px]"></i>
                            <span><strong>Akros Anti-Cheat</strong> required for all players.</span>
                        </li>
                        <li class="flex gap-2">
                            <i data-lucide="alert-triangle" class="w-4 h-4 text-yellow-500 mt-0.5 min-w-[16px]"></i>
                            <span>Admins reserve the right to DQ teams.</span>
                        </li>
                    </ul>
                    <a href="https://akros.ac/#download" target="_blank" class="mt-4 block w-full py-2 bg-red-900/30 border border-red-500/30 hover:bg-red-500/20 text-center text-red-300 text-sm font-bold uppercase tracking-wider transition-colors">
                        Get Akros Client
                    </a>
                </div>

                <div class="hud-panel p-5 md:p-6">
                    <h3 class="text-lg md:text-xl text-white brand-font mb-4 flex items-center gap-2">
                        <i data-lucide="map" class="w-5 h-5 text-zinc-400"></i> ACTIVE DUTY POOL
                    </h3>
                    <div class="grid grid-cols-2 gap-2">
                        <div class="map-card glow-active" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_ancient.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Ancient</span></div>
                        </div>
                        <div class="map-card glow-active" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_dust2.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Dust 2</span></div>
                        </div>
                        <div class="map-card glow-active" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_inferno.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Inferno</span></div>
                        </div>
                        <div class="map-card glow-active" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_mirage.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Mirage</span></div>
                        </div>
                        <div class="map-card glow-active" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_nuke.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Nuke</span></div>
                        </div>
                        <div class="map-card glow-active" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_overpass.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Overpass</span></div>
                        </div>
                        <div class="map-card glow-active col-span-2" style="background-image: url('https://raw.githubusercontent.com/sivert-io/cs2-server-manager/master/map_thumbnails/de_train.png');">
                            <div class="map-card-content"><span class="text-sm md:text-lg font-bold uppercase tracking-wider brand-font text-white drop-shadow-md">Train</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-2">
                <form id="registrationForm" class="space-y-6 md:space-y-8">
                    
                    <div class="hud-panel p-5 md:p-8">
                        <div class="flex items-center gap-3 mb-6 border-b border-white/10 pb-4">
                            <div class="w-8 h-8 bg-fuchsia-600 flex items-center justify-center font-bold text-black skew-x-[-10deg]">01</div>
                            <h2 class="text-2xl md:text-3xl text-white brand-font uppercase tracking-wide">Team Identity</h2>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6">
                            <div class="col-span-full bg-fuchsia-900/10 p-4 border border-fuchsia-500/30 rounded">
                                <label for="inviteCode" class="text-xs font-bold uppercase tracking-widest text-fuchsia-400 mb-2 block">VIP Access Code (Optional)</label>
                                <input type="text" id="inviteCode" placeholder="Enter Code" class="input-tech w-full p-3 text-white placeholder-zinc-600 focus:bg-fuchsia-900/20">
                            </div>
                            <div class="md:col-span-2">
                                <label class="text-xs font-bold uppercase tracking-widest text-zinc-500 mb-1 block">Team Name</label>
                                <input type="text" id="teamName" required placeholder="e.g. Faze Clan" class="input-tech w-full p-3 md:p-4 text-lg text-white font-bold">
                            </div>
                            <div>
                                <label class="text-xs font-bold uppercase tracking-widest text-zinc-500 mb-1 block">Region</label>
                                <input type="text" id="teamRegion" required placeholder="IND / PAK / ME" class="input-tech w-full p-3 md:p-4 text-white">
                            </div>
                            <div>
                                <label class="text-xs font-bold uppercase tracking-widest text-zinc-500 mb-1 block">Logo Link</label>
                                <input type="url" id="logoLink" placeholder="imgur.com/..." class="input-tech w-full p-3 md:p-4 text-white">
                            </div>
                        </div>
                    </div>

                    <div class="hud-panel p-5 md:p-8">
                        <div class="flex items-center justify-between gap-3 mb-6 border-b border-white/10 pb-4">
                            <div class="flex items-center gap-3">
                                <div class="w-8 h-8 bg-indigo-600 flex items-center justify-center font-bold text-white skew-x-[-10deg]">02</div>
                                <h3 class="text-2xl md:text-3xl text-white brand-font uppercase tracking-wide">Roster</h3>
                            </div>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <span class="text-xs font-bold text-zinc-500 uppercase tracking-wide mr-2">ADD SUBSTITUTE</span>
                                <div class="relative">
                                    <input type="checkbox" id="subToggle" class="sr-only peer">
                                    <div class="w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"></div>
                                </div>
                            </label>
                        </div>

                        <div class="space-y-4">
                            <div id="mainRoster"></div>

                            <div id="subContainer" class="hidden border-t border-dashed border-zinc-700 pt-4 mt-4">
                                <div class="bg-black/30 p-4 border-l-2 border-green-500">
                                    <div class="flex justify-between items-center mb-3">
                                        <span class="text-sm font-bold uppercase text-zinc-400">Player 06 // <span class="text-white">Tactical Sub</span></span>
                                        <span class="text-[10px] bg-green-900 text-green-300 px-2 py-0.5 rounded">OPTIONAL</span>
                                    </div>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                                        <input type="text" id="p6Discord" placeholder="Discord" class="input-tech w-full p-2 text-sm text-white">
                                        <input type="url" id="p6Steam" placeholder="Steam URL" class="input-tech w-full p-2 text-sm text-white">
                                        <input type="url" id="p6Faceit" placeholder="Faceit URL" class="input-tech w-full p-2 text-sm text-white">
                                        <input type="text" id="p6Rank" placeholder="Rank/Lvl" class="input-tech w-full p-2 text-sm text-white">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="hud-panel p-5 md:p-8">
                        <div class="flex items-center gap-3 mb-6 border-b border-white/10 pb-4">
                            <div class="w-8 h-8 bg-green-600 flex items-center justify-center font-bold text-black skew-x-[-10deg]">03</div>
                            <h3 class="text-2xl md:text-3xl text-white brand-font uppercase tracking-wide">Final Auth</h3>
                        </div>

                        <div class="space-y-4 mb-8">
                            <label class="flex items-center gap-4 p-4 bg-white/5 border border-white/5 hover:border-green-500/50 transition-colors cursor-pointer">
                                <input type="checkbox" id="akrosCheck" required class="w-5 h-5 accent-green-500 flex-shrink-0">
                                <span class="text-sm text-zinc-300">We confirm <strong>Akros Anti-Cheat</strong> is installed.</span>
                            </label>
                            <label class="flex items-center gap-4 p-4 bg-white/5 border border-white/5 hover:border-blue-500/50 transition-colors cursor-pointer">
                                <input type="checkbox" id="discordCheck" required class="w-5 h-5 accent-blue-500 flex-shrink-0">
                                <span class="text-sm text-zinc-300">All players have joined the <strong>Discord HQ</strong>.</span>
                            </label>
                            <label class="flex items-center gap-4 p-4 bg-white/5 border border-white/5 hover:border-yellow-500/50 transition-colors cursor-pointer">
                                <input type="checkbox" id="availCheck" required class="w-5 h-5 accent-yellow-500 flex-shrink-0">
                                <span class="text-sm text-zinc-300">We confirm availability for <strong>Jan 09, 2026</strong>.</span>
                            </label>
                        </div>

                        <button type="submit" id="submitBtn" class="btn-skew w-full py-5 text-xl md:text-2xl font-black text-white uppercase tracking-widest shadow-lg">
                            <span>INITIATE REGISTRATION</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div id="successMessage" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-md p-4">
            <div class="hud-panel p-8 md:p-10 max-w-lg text-center border-green-500/50 w-full">
                <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500">
                    <i data-lucide="check" class="w-10 h-10 text-green-400"></i>
                </div>
                <h2 class="text-4xl md:text-5xl font-bold text-white mb-2 brand-font uppercase">Roster Locked</h2>
                <p class="text-zinc-400 mb-8">Registration Complete.<br>Check Discord for updates.</p>
                <button onclick="window.location.reload()" class="btn-skew px-8 py-3 text-white font-bold uppercase">
                    <span>Return to Base</span>
                </button>
            </div>
        </div>
    </div>
    
    <footer class="mt-12 text-center pb-8 opacity-50">
        <p class="text-xs uppercase tracking-[0.3em]">
            © 2026 Pixel Palace • Dev by <a href="https://discord.com/users/bravo.gg" target="_blank" class="text-fuchsia-500 hover:text-fuchsia-400 hover:underline transition-colors">Bravo.gg</a>
        </p>
    </footer>

    <script>
        // --- RENDER MAIN ROSTER ---
        const mainRoster = document.getElementById('mainRoster');
        const createPlayerBlock = (i, title) => `
            <div class="bg-black/30 p-4 border-l-2 ${i===1 ? 'border-yellow-500' : 'border-indigo-500'}">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-sm font-bold uppercase text-zinc-400">Player 0${i} // <span class="text-white">${title}</span></span>
                    ${i===1 ? '<i data-lucide="crown" class="w-4 h-4 text-yellow-500"></i>' : ''}
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                    <input type="text" id="p${i}Discord" required placeholder="Discord" class="input-tech w-full p-2 text-sm text-white">
                    <input type="url" id="p${i}Steam" required placeholder="Steam URL" class="input-tech w-full p-2 text-sm text-white">
                    <input type="url" id="p${i}Faceit" required placeholder="Faceit URL" class="input-tech w-full p-2 text-sm text-white">
                    <input type="text" id="p${i}Rank" required placeholder="Rank/Lvl" class="input-tech w-full p-2 text-sm text-white">
                </div>
            </div>`;
        
        let html = createPlayerBlock(1, 'Captain');
        for(let i=2; i<=5; i++) html += createPlayerBlock(i, 'Starter');
        mainRoster.innerHTML = html;

        // --- SUB TOGGLE LOGIC ---
        const subToggle = document.getElementById('subToggle');
        const subContainer = document.getElementById('subContainer');
        const subInputs = subContainer.querySelectorAll('input');

        subToggle.addEventListener('change', (e) => {
            if (e.target.checked) {
                subContainer.classList.remove('hidden');
                subInputs.forEach(input => input.required = true); // Make required if visible
            } else {
                subContainer.classList.add('hidden');
                subInputs.forEach(input => {
                    input.required = false;
                    input.value = ''; // Clear value on hide
                });
            }
        });

        // --- COUNTDOWN & SLOTS ---
        const deadlineDate = new Date('2025-12-31T22:59:59Z').getTime();
        const timeLeftElement = document.getElementById('time-left');
        const countdownWrapper = document.getElementById('countdown-wrapper');

        function updateCountdown() {
            const now = new Date().getTime();
            const difference = deadlineDate - now;
            if (difference < 0) {
                timeLeftElement.textContent = 'REGISTRATION OFFLINE';
                countdownWrapper.classList.remove('bg-fuchsia-900/40');
                countdownWrapper.classList.add('bg-red-900/40', 'border-red-600');
                timeLeftElement.classList.add('text-red-500');
                clearInterval(countdownInterval);
                return;
            }
            const days = Math.floor(difference / (1000 * 60 * 60 * 24));
            const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((difference % (1000 * 60)) / 1000);
            timeLeftElement.textContent = `${days}D ${String(hours).padStart(2,'0')}H ${String(minutes).padStart(2,'0')}M ${String(seconds).padStart(2,'0')}S`;
        }
        updateCountdown();
        const countdownInterval = setInterval(updateCountdown, 1000);

        let arePublicSlotsFull = false;
        async function checkSlots() {
            try {
                const response = await fetch(`${SLOT_API_URL}?t=${new Date().getTime()}`);
                const data = await response.json();
                const slotDisplay = document.getElementById('slot-display');
                if (data.isFull) {
                    arePublicSlotsFull = true;
                    slotDisplay.innerHTML = '<span class="text-red-500">LOCKED</span>';
                    const btn = document.getElementById('submitBtn');
                    btn.innerHTML = '<span>SLOTS FULL (VIP ONLY)</span>';
                    btn.classList.add('grayscale');
                } else {
                    arePublicSlotsFull = false;
                    slotDisplay.innerHTML = `${data.remaining} OPEN`;
                }
            } catch (error) {
                console.error("Slot check failed:", error);
                document.getElementById('slot-display').innerText = "20 OPEN"; 
            }
        }
        checkSlots();

        // --- SUBMIT ---
        const form = document.getElementById('registrationForm');
        const submitBtn = document.getElementById('submitBtn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userCode = document.getElementById('inviteCode').value.trim();
            if (arePublicSlotsFull && userCode.length === 0) {
                alert("⚠️ PUBLIC SLOTS FULL.\n\nA VIP Access Code is required to bypass the lock.");
                document.getElementById('inviteCode').focus();
                return; 
            }
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span>TRANSMITTING DATA...</span>';
            
            const params = new URLSearchParams();
            const add = (idKey, elementId) => {
                const element = document.getElementById(elementId);
                if (element && ENTRY_IDS[idKey]) params.append(`entry.${ENTRY_IDS[idKey]}`, element.value);
            };
            add('teamName', 'teamName'); add('teamRegion', 'teamRegion'); add('logoLink', 'logoLink'); add('inviteCode', 'inviteCode'); 
            for(let i=1; i<=5; i++) { add(`p${i}Discord`, `p${i}Discord`); add(`p${i}Steam`, `p${i}Steam`); add(`p${i}Faceit`, `p${i}Faceit`); add(`p${i}Rank`, `p${i}Rank`); }
            
            // Add P6 only if checked
            if(subToggle.checked) {
                add('p6Discord', 'p6Discord'); add('p6Steam', 'p6Steam'); add('p6Faceit', 'p6Faceit'); add('p6Rank', 'p6Rank');
            }

            const checkboxEntryId = ENTRY_IDS.checkboxes;
            if(document.getElementById('akrosCheck').checked) params.append(`entry.${checkboxEntryId}`, 'ANTI-CHEAT ACKNOWLEDGED');
            if(document.getElementById('availCheck').checked) params.append(`entry.${checkboxEntryId}`, 'SCHEDULE CONFIRMED');
            if(document.getElementById('discordCheck').checked) params.append(`entry.${checkboxEntryId}`, 'DISCORD JOINED');

            const finalUrl = `https://docs.google.com/forms/d/e/${FORM_ID}/formResponse`;
            let currentRetry = 0; let success = false;
            while (currentRetry < 5 && !success) {
                try {
                    await fetch(finalUrl, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/x-www-form-urlencoded' }, body: params });
                    success = true;
                    document.getElementById('successMessage').classList.remove('hidden');
                } catch (err) {
                    currentRetry++;
                    await new Promise(resolve => setTimeout(resolve, Math.pow(2, currentRetry) * 1000));
                }
            }
            if (!success) {
                 submitBtn.disabled = false;
                 submitBtn.innerHTML = '<span>TRANSMISSION FAILED</span>';
            }
        });
    </script>
</body>
</html>
